`4.1.1 (2017-06-20) <https://github.com/neos/flow-development-collection/releases/tag/4.1.1>`_
==============================================================================================

Overview of merged pull requests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`BUGFIX: Add handling of HTTP HEAD-request with curl <https://github.com/neos/flow-development-collection/pull/993>`_
---------------------------------------------------------------------------------------------------------------------

Extended CurlEngine for request-type HEAD to set the option to not expect a body.

resolves #992 

`TASK: Better message on missing runtime expression <https://github.com/neos/flow-development-collection/pull/996>`_
--------------------------------------------------------------------------------------------------------------------

This improves the error message on missing AOP runtime expressions
just a little.

`TASK: Add missing documentation for trait introduction <https://github.com/neos/flow-development-collection/pull/984>`_
------------------------------------------------------------------------------------------------------------------------

Trait introduction is available since some time, but it was never
documented. This change adds a short explanation with a code
example to fix that.

`TASK: Throw error if package exists two times <https://github.com/neos/flow-development-collection/pull/953>`_
---------------------------------------------------------------------------------------------------------------

Without this change a package (defined by composer name eg. "neos/party")
that exists two times in the installation would be silently ignored and added
with the second path found.	This could still result in strange effects
happening as autoload and Flow internal paths (configuration, resources) could
diverge.

With this change an exception is thrown when the package states are resolved
and a package is found a second time.

Fixes: #611

`BUGFIX: Missing end quote in security documentation example <https://github.com/neos/flow-development-collection/pull/988>`_
-----------------------------------------------------------------------------------------------------------------------------

* Packages: ``Flow``

`BUGFIX: Trait AOP works when only introduces traits to class <https://github.com/neos/flow-development-collection/pull/987>`_
------------------------------------------------------------------------------------------------------------------------------

When introducing a trait using AOP it now works if the class only has traits introduced via AOP.

`BUGFIX: Check for link in unpublishFile() <https://github.com/neos/flow-development-collection/pull/973>`_
-----------------------------------------------------------------------------------------------------------

`unpublishFile()` in the `FileSystemTarget` does not remove symlinks
correctly, thus the method is adjusted in the `FileSystemSymlinkTarget`
to check using `is_link()` instead of `file_exists()`.

Fixes #972

`TASK: Remove TYPO3 and TypoScript uses from code <https://github.com/neos/flow-development-collection/pull/979>`_
------------------------------------------------------------------------------------------------------------------

Changes some package names used in a test and a comment in a class
to no longer mention TYPO3, TypoScript or TYPO3CR.

* Packages: ``Flow``

`BUGFIX: Return type declaration should be FQCN <https://github.com/neos/flow-development-collection/pull/967>`_
----------------------------------------------------------------------------------------------------------------

Fixes #963

`TASK: Improve documentation on Configuration and Installation <https://github.com/neos/flow-development-collection/pull/891>`_
-------------------------------------------------------------------------------------------------------------------------------

Have Add a note to chapter «Installation» and change the sequence in chaper «Configuration» for better usable/find the context-part, not to skip because of note I moved this to the end and add more subtitle about context for better SERP-Result.

More Details about the reason in slack-channel «guilde-documentation»

(Second try: Sorry)

* Packages: ``Flow``

`BUGFIX: FileSystemTargetTest shouldn't have side effects <https://github.com/neos/flow-development-collection/pull/966>`_
--------------------------------------------------------------------------------------------------------------------------

The test would create a Flow package in the current installation as the
package manager in the test was not prepared with a virtual filesystem.

`TASK: Adjust schema of routes configuration <https://github.com/neos/flow-development-collection/pull/932>`_
-------------------------------------------------------------------------------------------------------------

Previously the route parts were evaluated correct regardless of the configured keys because the schema used the configuration `additionalAttributes = FALSE` instead of `additionalProperties = FALSE`. This is fixed and the schema is updated 

- validate the keys in route parts strictly
- allow configuration of `objectType` and  `uriPattern ` instead of `handler`
- allow `options` and `toLowerCase` for all routeParts

- [x] Code follows the PSR-2 coding style
- [ ] Tests have been created, run and adjusted as needed
- [x] The PR is created against the [lowest maintained branch](https://www.neos.io/features/release-roadmap.html)

`BUGFIX: Set FLOW_VERSION_BRANCH to 4.1 <https://github.com/neos/flow-development-collection/pull/964>`_
--------------------------------------------------------------------------------------------------------

* Packages: ``Flow``

`BUGFIX: ConfigurationManager should never have empty configuration <https://github.com/neos/flow-development-collection/pull/948>`_
------------------------------------------------------------------------------------------------------------------------------------

Custom configuration types of processing type settings could break
the compile process as the array wouldn't have the custom configuration
name as key set because it was never initialized in this processing
type.

This change initializes any configuration type with an empty array in
the beginning and provides a test to proof the behavior.

Fixes: #934

* Packages: ``Flow``

`TASK: Fix error message to correctly refer to composer.json <https://github.com/neos/flow-development-collection/pull/960>`_
-----------------------------------------------------------------------------------------------------------------------------

This misleading message was introduced in `a0a1453d87053e2c17b954804c61c5c03fa00c89 <https://github.com/neos/flow-development-collection/commit/a0a1453d87053e2c17b954804c61c5c03fa00c89>`_
due to too much javascript work being done.

`TASK: Fix ClassReflection::getMethods return type annotation <https://github.com/neos/flow-development-collection/pull/951>`_
------------------------------------------------------------------------------------------------------------------------------

* Packages: ``Flow``

`Detailed log <https://github.com/neos/flow-development-collection/compare/4.1.0...4.1.1>`_
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
